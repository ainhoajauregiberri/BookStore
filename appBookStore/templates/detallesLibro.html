 <!--output = ', '.join([str(libro.id), libro.nombre, str(libro.editorial), str([a.nombre for a in libro.autores.all()])])-->

 {% extends "base.html" %}
 {% load static %}

 {% block titulo %} Detalle del libro{% endblock %}
 
 {% block contenido %}

 <script>
    window.onload=function(){
    document.getElementById("op2").style.background="white";
    }
</script>
    <div class="ila">
        <div class="zuta">
            <div>
                <img src= {{ libro.imagenLink }} class="portada" alt="">
            </div>
            
        </div>
        <div class="zuta">
            <h3 class="tituloLibro"> {{ libro.nombre}}</h3>
            <br>
                {% if libro %}
                     <div class="azpiZuta">
                        <h4 class="infoTitulos"> Número de libro:</h4>
                            <p class="texto">
                                Este es el libro número {{ libro.id}} de la biblioteca Bookstore.
                            </p>
                            <br>
                        <h4 class="infoTitulos"> Fecha de publicación:</h4>
                            <p class="texto">
                                Fue publicado el  {{ libro.fechaPubli |date:'d-m-Y'}}.
                            </p>
                            <br>
                        <h4 class="infoTitulos"> Autor/es:</h4>
                            <div class="texto">
                                {% if autores %}
                                    {% for a in autores %}
                                    <ul>
                                    <li>
                                        <p class="texto">
                                        <a href= "{% url 'detallesAutores' a.id %}">{{ a.nombre }}</a>
                                        </p>
                                    </li>
                                    </ul>
                                    {% endfor %}
                                    {% else %}
                                        <p class="texto">No se dispone de la información del autor del libro {{editorial.nombre}}</p>
                                    {% endif %}
                                </div>  
                            <br>
                        <h4 class="infoTitulos"> Sinopsis:</h4>
                            <p class="texto">
                                {{ libro.sinopsis}}
                            </p>
                            <br>
                        <div class="detallesClasificacionestrellas">
                            <form action="{% url 'getDatosValoracion' libro.id %}" method="POST">

                                <!--
                                <span class="fa fa-star" onclick="calificar(this)" id="1estrella"></span>
                                <span class="fa fa-star" onclick="calificar(this)" id="2estrella"></span>
                                <span class="fa fa-star" onclick="calificar(this)" id="3estrella"></span>
                                <span class="fa fa-star" onclick="calificar(this)" id="4estrella"></span>
                                <span class="fa fa-star" onclick="calificar(this)" id="5estrella"></span>
                            

                            onclick="mediaBD(this, parseInt('{{libro.id}}'), parseInt('{{ libro.mediaValoracion}}'), parseInt('{{ libro.numValoraciones}}'))"
                            -->

                            <span class="fa fa-star" onload="mediaEstrellas(this, parseInt('{{libro.mediaValoracion}}'))" id="1estrella"></span>
                            <span class="fa fa-star" id="2estrella"></span>
                            <span class="fa fa-star" id="3estrella"></span>
                            <span class="fa fa-star" id="4estrella"></span>
                            <span class="fa fa-star" id="5estrella"></span>

                            ({{libro.numValoraciones}} valoraciones)
                        </br>
                    </br>
                            <div id="calificar">
                                {% csrf_token %}
                                {{form}}
                            </div>
    <button type="submit" class="botonCalificar" style="border:#000000;border-style:inset;border-width: thin; font-family: 'Poppins', sans-serif; border-radius: 10%; margin-left: 20px; font-size:x-small;" 
     >Calificar</button>
</form>                     
                        </div>
                        <p class="texto">
                            ({{libro.numValoraciones}})
                        </p>
                    </div>
                    {% else %}
                        <p class="texto">No se dispone de la información del autor del libro {{editorial.nombre}}</p>
                {% endif %}
                
        </div>
        
    </div>
    <script src="{% static 'js/calificar.js' %}">
    </script>

    
 {% endblock %}

